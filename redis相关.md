### 缓存雪崩
同一时间，大量缓存数据失效，或者redis挂掉。导致原本访问redis的请求全部打到数据库上，造成数据库短期内cpu和内存压力激增，严重是可能造成宕机
**原因**：redis中缓存的数据过期时间相同，导致数据同时失效。
**解决方式：**对于redis中大量数据失效，可以给每一个过期时间加上一个随机值，避免大量数据同时失效。
#### 对于“Redis挂掉了，请求全部走数据库”这种情况，我们可以有以下的思路：
**事发前：**实现Redis的高可用(主从架构+Sentinel 或者Redis Cluster)，尽量避免Redis挂掉这种情况发生。
**事发中：**万一Redis真的挂了，我们可以设置本地缓存(ehcache)+限流(hystrix)，尽量避免我们的数据库被干掉(起码能保证我们的服务还是能正常工作的)
**事发后：**redis持久化，重启后自动从磁盘上加载数据，快速恢复缓存数据。


### 缓存穿透
访问一条数据库中不存在的数据（如：id为-1的数据），此时redis缓存中一定不存在，此时该请求就会绕过redis，直接访问数据库。
**原因：**大量请求一个数据库中不存在的数据。
**解决：**由于请求的参数是不合法的(每次都请求不存在的参数)，在redis和数据中之间加一层过滤（布隆过滤器）或者压缩filter提前拦截，不合法就不让这个请求到数据库层！
当我们从数据库找不到的时候，我们也将这个空对象设置到缓存里边去。下次再请求的时候，就可以从缓存里边获取了。
这种情况我们一般会将空对象设置一个较短的过期时间。



